
<div class="container-fluid px-0 px-md-3 d-flex flex-column justify-content-center align-items-center">
  <div class="card bg-white col-md-10 col-xl-6">
    <div class="card-body">
      <div class="container-fluid d-flex justify-content-between">
        <h2 class="card-title text-center">Order #<%= order.id %></h2>

        <% if order.shipment %>
          <%=
            button_to "View Shipment",
            shipment_path(order.shipment.id),
            class: "btn btn-warning",
            method: :get
          %>
        <% else %> 
          <%=
            button_to "Create Shipment",
            shipments_path(order_id: order.id, rate_id: order.shipping_rate),
            class: "btn btn-warning",
            method: :post
          %>
        <% end %>

      </div>
      <div class="card bg-white">
        <div class="card-body px-0 px-md-3">
          <% if order.status != "paid" %>
            <p class="card-text"><b>Date: </b><%= order.created_at %></p>
            <p class="card-text"><b>Status: </b><%= order.status %></p>
          <% else %>
            <div class="container">
              <div class="row">
                <div class="col-md-6">
                  <p class="card-text"><b>Name:</b> <%= order.name %></p>
                  <p class="card-text"><b>Email:</b> <%= order.email %></p>
                  <p class="card-text"><b>Address:</b></p>
                  <p class="card-text mb-0"><%= order.shipping_address["line1"] %></p>
                  <p class="card-text mb-0"><%= order.shipping_address["line2"] %></p>
                  <p class="card-text mb-0">
                    <%= order.shipping_address["city"] %>, <%= order.shipping_address["state"] %>
                  </p>
                  <p class="card-text mb-0"><%= order.shipping_address["postal_code"] %></p>
                  <p class="card-text mb-2"><%= order.shipping_address["country"] %></p>
                </div>
                <div class="col-md-6 py-3 py-md-0">
                  <p class="card-text"><b>Date: </b><%= order.created_at %></p>
                  <p class="card-text"><b>Status: </b><%= order.status.upcase %></p>
                  <p class="card-text"><b>Sub-total: </b><%= number_to_currency(order.sub_total) %></p>
                  <p class="card-text"><b>Total: </b><%= number_to_currency(order.total)%></p>
                </div>
              </div>
            </div>
          <% end %>
          <div class="container mx-0 p-0">
            <div class="bg-light card">
              <div class="card-body px-1 px-md-3">
                <h5 class="card-title text-center">Order Items</h5>
                <% order.order_items.each do |item| %>
                  <div class="container px-1 px-md-3">
                    <div class="card">
                      <div class="row g-0">
                        <div class="col-md-4">
                          <%= image_tag(item.product.main_image, class: "img-fluid rounded-start") %>
                        </div>
                        <div class="card-body pt-0 col-md-8 d-flex flex-column justify-content-between">
                          <h6 class="card-title text-center"><b><%= item.product.title %></b></h6>
                          <p class="card-text mb-0 lh-1">
                          <b>Price: </b><%= number_to_currency(item.price) %> <br>
                          <b>Quantity: </b><%= item.quantity %> <br>
                          <b>Total: </b><%= number_to_currency(item.price * item.quantity) %>
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

