<div class="container d-flex flex-column justify-content-center mt-5" style="gap: 2em">
    <% if @cart_items.any? %>
      <% item_counter = 0 %>
      <% @cart_items.each do |product_id, details| %>
        <% product = Product.find(product_id) %>
    <div class="row">
      <div class="col-12 card" style="">
          <div class="row flex-wrap">
            <div id="carousel<%= item_counter.to_s %>" class="carousel slide col-12 col-md-12 col-lg-6">
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <% if !product.main_image.attached? %>
                    <% main_image_url = "1000014596.jpg" %>
                  <% else %>
                    <% main_image_url = product.main_image %>
                  <% end %>
                  <%= image_tag main_image_url, class: "d-block w-100", alt: "" %>
                </div>
                <% if product.images.any? %>
                  <% product.images.each do |image| %>
                  <div class="carousel-item">
                    <%= image_tag image, class: "d-block w-100", alt: "" %>
                  </div>
                <% end %>
              <% end %>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="carousel<%= item_counter.to_s %>" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carousel<%= item_counter.to_s %>" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
            <!-- Card Body -->
            <div class="card-body d-flex flex-column justify-content-between col-sm-12 col-md-12 col-lg-6">
              <h5 class="card-title"><%= product.title %></h5>
              <p class="card-text"><b>Description: </b><%= product.description %></p>
              <div>
                <p class="card-text"><b>Quantity:</b> <%= details['quantity'] %></p>
                <p class="card-text"><b>Total:</b> <%= number_to_currency(product.price * details['quantity'].to_i) %></p>
              </div>
              <div class="d-flex justify-content-end">
                <%= button_to "Remove Item", remove_item_cart_path(product_id), class: "btn btn-warning", method: :delete %>
              </div>
            </div>
          </div>
        </div>
    </div>
        <% item_counter += 1 %>
      <% end %>
    <% end %>
</div>
